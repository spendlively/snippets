
////////////////////////////////////////////////////////////////////
//////////Файлы и утилиты для сбора информации о модуле/////////////
////////////////////////////////////////////////////////////////////

//1. /proc/kallsyms
Динамическая таблица всех символов
(имена функций, структур данных и т.д.), известных в ядре

cat /proc/kallsyms | grep T | grep ' printk'
cat /proc/kallsyms | grep '\[md'

После загрузки модулей динамическая таблица имён дополнилась именами загруженных модулей



//2. /boot/System.map-`uname -r`
Эта таблица статическая, зафиксированная на момент её формирования,
и она не меняется в зависимости от подгружаемых позже компонентов ядра

cat /boot/System.map-`uname -r` | grep T | grep ' printk'
cat /boot/System.map-`uname -r` | grep T | grep '\[md'



//3. nm
Утилита для работы с объектными модулями gcc,

man nm
nm md1.ko | grep ' md'
nm md2.ko | grep ' md'



//4. objdump и readelf
objdump -h md1.ko
readelf -s md1.ko



//5. Отличая объектных файлов .o и .ko
 - в формат .o заносятся значения переменных,
определяемых в коде макросами группы MODULE_*(),

 - формат .ko дополняется информацией,
необходимой для корректной загрузки модуля: версии ядра, зависимости и т.д.

 - попытка загрузить файл .ko на машину с другим ядром завершится ошибкой
