
//Устройства
 - символьные
 - блочные
 - сетевый

//Основные системные вызовы для любых драйверов одинакомы
 - open
 - read
 - write
 - close

//Работа с устройствоами из пользовательских приложений
 - для каждого устройства ядро создает файлустройства /dev/tty*
 - каждому устройству в /dev/tty* соответствует структура struct device
 - пользовательская функция fwrite/fread транслируется в соотв системный вызов write/read
 - ядро обрабатывает вызовы write/read использую механизм прерываний

//Пример
1. printf(...) транслируется в fprintf()
2. fprintf(stdout, ...) транслируется в системный вызов write()
3. write()
4. реальный системный вызов
mov $4,%eax //4 - номер системного вызова write
...
делается программное прерывание int 80 (80 - 16-чное число)

------------Пространство пользователя--------------
---------------------------------------------------
----------------Пространство ядра------------------
5. в ядре обработчик прерываний syscall dispatcher
анализирует регистр %eax и вызывает соответствующую процедуру
внутри ядра
6. write

//Функция для отладки частей кода в ядре
printk()

//Printk log level
#define LOGLEVEL_DEFAULT -1
#define LOGLEVEL_EMERG 0
#define LOGLEVEL_ALERT 1
#define LOGLEVEL_CRIT 2
#define LOGLEVEL_ERR 3
#define LOGLEVEL_WARNING 4
#define LOGLEVEL_NOTICE 5
#define LOGLEVEL_INFO 6
#define LOGLEVEL_DEBUG 7



