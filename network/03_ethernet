//////////////////////////////////////////////////////
//////////////////////ETHERNET////////////////////////
//////////////////////////////////////////////////////

- находится на канальном и физическом уровнях
- на канальном использует подуровни llc и mac
- описан в 1982 комитетом ieee 802.3

Типы ethernet
1. Ethernet 10мбайт/с стандарт 802.3
2. Fast Ethernet 100мб/с  802.3u
3. Gigabit Ethernet 1Гб/с  802.3z, 802.3ab
4. 10G Ethernet 10Гб/с 802.3ae, 802.3an

Технологии ethernet:
1. Классический ethernet (хаб)
- в разделяемой среде
2. Коммутируемый ethernet (свитч)
- точка-точка
- используется только в 10G Ethernet





//////////////////////////////////////////////////////
/////////////////КЛАССИЧЕЧКИЙ ETHERNET////////////////
//////////////////////////////////////////////////////

Концентраторы ethernet (hub)
- физическая топология - звезда - отдельный кабель для каждого пк
- логическая топология - общая шина - внутри концентратора все данные которые передаются на один порт хаба передаются на все остальные порты

Физический уровень
- коаксиальный кабель
- витая пара
- оптоволокно

Канальный уровень
- семаны подуровни llc и mac

Мак адреса
- регламентируются стандартом ieee 802
- длина 6 байт

Типы мак адресов:
1. Индивидуальный unicast
- предназначен для отдельных пк
2. Групповой
- multicast
- первый бит старшего байта равен 1 (8)
- 80-00-a7-f0-00-00
3. Широковещательный
- адрес доя всех пк в сети
- ff-ff-ff-ff-ff-ff

Структура мак адреса:
- первые 3 байта - идентификатор организации (OUI), выдается ieee производителям оборудования
- последние 3 байта назначает производитель, кот гарантирует уникальность

Примеры OUI:
- 00:00:0c - cisco
- 00:02:b3 - intel
- 00:04:ac - ibm

Формат кадра ethernet 2 (dix)
1. Заголовок
    1.1. 6 байт адрес получателя
    1.2. 6 байт адрес отправителя
    1.3. 2 байта тип
        - 0800 - ipv4
        - 86dd - ipv4
        - 0806 - arp
2. 46-1500 байт данные
3. 4 байта контрольная сумма - для проверки правильности доставки кадра
- в дригих стандартах небольшие отличия
- существует расширение jumbo frame, кот. позволяет пересылать кадры до 9000 байт

//Коллизии
Если 2 пк одновременно начнут передавать данные, они исказятся - появится коллизии.

Для соглазованой передачи данных используется метод доступа к среде CSMA/CD
- carrier sense multiple access with collision detection
- множественный доступ с прослушиванием несущей частоты и распознаванием коллизий

CSMA/CD
- пк передает данные только если линия свободна
- способ определить - прослушивание основной гармоники сигнала (несущей частоты)
- классический ethernet использует манчестерское кодирование
- несущая частота при мк от 10 до 20 МГц
- если в разделяемой среде есть сигнал с такой частотой, значит кто-то уже передает данные и нужно ждать когда сигнал закончится
- чтобы определить коллизию пк одновременно передает и принимает данные, если мигнал отличается - значит произошла коллизия, пк останавливает передачу и передает jam-последовательность - сигнал который сильно искажает данные в сети и гарантирует, что другие пк быстро распознают коллизию

Модель csma/cd состоит из 3х периодов:
1. Период передачи
- пк передает данные
- состоит из 3х частей:
    - передается преамбула - необходима для синхронизации источники и передатчика - 8 байт первые 7 байт 10101010, 8 байт 10101011 далее идет кадр
    - передается кадр
       - пк передает кадр в сеть
       - все пк читают первые 6 байт с мак-адресом получателя
       - дальнейшие байты читает только получатель, а другие отбрасывают
       - существует также неразборчивый режим для мониторинга сети
    - делается пауза на межкадровый интервал
       - длится 9.6мкс
       - предотвращает монопольный захват канала
       - в это время сетевые адапторы приводятся в исходное состояние
2. Период конкуренции
- все пк борятся за монопольный доступ к  разделяемой среде передачи данных
- если пк обнаружил коллизию, он делает паузу
- длительность паузы = L × 512 битовых интервалов
- битовый интервал - время м/у появлениями 2х последовательных битов данных = 1мкс в классическом ethernet
- L увиличивается в зависимости от номера попытки - экспоненциальный двоичный алгоритм отсрочки
- после 16 попыток передача данных прекращается
3. Период простоя
- никому ничего передавать не нужно

Время оборота (round trip time- RTT), время за которое сигнал успевает дойти от одного конца сети до другого и вернуться назад.
RTT должно быть меньше, чем время передачи самого короткого кадра - иначе может произойти коллизия, которую не обнаружит отправитель

Минимальная длина в кадре 46 байт - чтобы отправитель успвал обнаружить коллизию

Если длина данных меньше, то она дополняется нулями (пример arp запрос)

Максимальная длина сети в классическом ethernet 2500 метров - для распознания коллизии

Недостатки классического ethernet:
- плохая масштабируемость
- низкая безопасность

Решение проблем - коммутируемый ethernet





//////////////////////////////////////////////////////
////////////////КОММУТИРУЕМЫЙ ETHERNET////////////////
//////////////////////////////////////////////////////
Классический ethernet использует концентраторы hub - использует топологию общая шина - работает на физическом уровне - передает эл.сигналы на все порты

Коммутируемый ethernet спользует коммутаторы - switch - использует полносвязную топотогию - работает на канальном уровне, анализирует заголовок канального уровня, исвлекает адрес получателя и передает данные только на тот порт, к которому подключен получатель

Концентратор запоминает мак-адреса с помощью алгоритма обратного обучения
- достает мак-отправителя из кадра
- записывает в таблицу мак и номер порта
- если в таблице нет мака получателя - отправляет кадр на все порты кроме порта отправителя - как хаб

Преимущества:
- надежность - нет коллизий
- безопасность
