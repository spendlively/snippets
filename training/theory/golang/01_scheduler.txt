
При сбоке программы на го, она собирается вместе со встроенным планировщиком

Планировщик управляет многозадачностью распределяя m-горутин среди n-процессоров (gomaxprocs)

Процессор - по сути очередь горутин

К каждому процессору прикрепляется тред, который берет горутины и выполняет их

Есть тред пул, в котором хранятся ранее созданные треды, которые позже могут быть переиспользованы

Есть глобальная очередь куда попадают некоторые горутины

//Строение очереди горутин
Fifo очередь + 1-элементный lifo buffer
Горутина из лифо выполняется вне очереди

Если горутина пораждает другую, новая помещается в буффер, чтобы кэш в процессоре не успевал протухнуть и горутина выполнилась быстрее

Если в буфере уже усть горутина, она проталкивается в очередь

Если в очереди процессора заканчивается горутины, он забирает себе глобальную очередь целиком, если там тоже ничего, берет одну горутину из чужой очереди

Каждый 61й тик, скедулер берет горутину из глобальной очереди